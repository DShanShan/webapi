<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        .box {
            width: 480px;
            border: 1px solid #cccccc;
            margin: 0 auto;
            padding: 10px;
        }
        .box .text {
            width: 480px;
            height: 200px;
            border: 1px solid #cccccc;
            outline: none;
            overflow-y: scroll;
        }
        .input {
            width: 80px;
            height: 40px;
            background-color: #FF9700;
            border: 0;
            outline: none;
            margin: 10px 10px 10px 0;
            border-radius: 5px;
            color: white;
            font-size: 15px;
        }
        .big {
            width: 385px;
            line-height: 55px;
            float: right;
            position: relative;
            display: block;
        }
        .span{
            cursor: pointer;
            font-style: normal;
        }
        .div{
            width: 183px;
            height: 50px;
            line-height: 25px;
            border: 1px solid #cccccc;
            background-color: #fff;
            padding: 5px;
            position: absolute;
            bottom: 40px;
            left: -17px;
            display: none;
            cursor: pointer;
        }
        ul li{
            width: 395px;
            height: 20px;
            display: inline-block;
            color: black;
            font-size: 15px;
            text-decoration: none;
            position: relative;
            border-bottom: 1px dashed #cccccc;
            list-style: none;
            padding-right: 85px;
            word-break: break-word;
        }
        li span,li em {
            width: 35px;
            display: inline-block;
            text-align: right;
            position: absolute;
            right: 0;
            cursor: pointer;
        }
        li em {
            font-style: normal;
            right: 45px;
        }
        li strong {
            width: 395px;
            height: 19px;
            font-size: 16px;
            font-weight: normal;
            display: inline-block;
        }
        input {
            width: 395px;
            height: 19px;
            color: black;
            font-size: 16px;
            height: 20px;
            font-weight: normal;
            border: 0;
            outline: none;
        }
    </style>
</head>
<body>
<div class="box">
    <div contenteditable="true" class="text" ></div>
    <input class="input" type="button" value="å‘å¸ƒ">
    <div class="big">
        <i class="span">ğŸ˜€</i>
        <div class="div">
            <img src="../img/01.gif" alt="">
            <img src="../img/02.gif" alt="">
            <img src="../img/03.gif" alt="">
            <img src="../img/04.gif" alt="">
            <img src="../img/05.gif" alt="">
            <img src="../img/06.gif" alt="">
            <img src="../img/07.gif" alt="">
            <img src="../img/08.gif" alt="">
            <img src="../img/09.gif" alt="">
            <img src="../img/10.gif" alt="">
            <img src="../img/11.gif" alt="">
            <img src="../img/12.gif" alt="">
        </div>
    </div>
    <ul>
        <li><strong>å•Šå•Šå•Šå•Šå•Šå•Š</strong><em>ç¼–è¾‘</em><span>åˆ é™¤</span></li>
    </ul>
</div>
</body>
<script>
    var box = document.querySelector(".box");
    var text = document.querySelector(".text");
    var input = document.querySelector("[type='button']");
    var ul = document.querySelector("ul");
    var span1 = document.querySelector(".span");
    var div = document.querySelector(".div");
    var img = document.querySelectorAll("img");

    function send(){
        //è·å–æ–‡æœ¬æ¡†çš„å†…å®¹å¹¶å»æ‰ä¸¤ç«¯çš„ç©ºæ ¼
        var value = text.innerHTML.trim();
        if (value !== "" ) {
            if (value.length||value.children.length) {
                //åˆ›å»ºå…ƒç´ li
                var li = document.createElement("li");
                var strong = document.createElement("strong");

                //æŠŠæ–‡æœ¬æ¡†é‡Œé¢è·å–åˆ°çš„å€¼ç»™li

                strong.innerHTML = value;
                li.appendChild(strong);

                // console.log(li.innerText)
                //æŠŠliæ·»åŠ åˆ°ulä¸­
                // ul.appendChild(li);
                //æŠŠliæ’å…¥åˆ°ç¬¬ä¸€
                ul.insertBefore(li,ul.children[0]);
                //åˆ›å»ºå…ƒç´ span
                var span = document.createElement("span");
                span.innerText = "åˆ é™¤";
                //æŠŠspanæ·»åŠ åˆ°lié‡Œé¢
                li.appendChild(span);
                //åˆ›å»ºå…ƒç´ em
                var em = document.createElement("em");
                em.innerText="ç¼–è¾‘";
                //æŠŠemæ·»åŠ åˆ°lié‡Œé¢
                li.appendChild(em);
                //æ¯æ¬¡å†™å…¥åæ¸…ç©º
                text.innerHTML = "";

            } else {
                alert("é•¿è¯çŸ­è¯´ï¼Œä¸èƒ½è¶…è¿‡120~~~");
            }
        }else {
            alert("ä¸èƒ½å‘å¸ƒç©ºå¾®åš")
        }
    }
    //æŒ‰ä¸‹é”®ç›˜ä¸Šçš„æŸä¸ªé”®
    text.onkeydown=function (ev) {
        //æŒ‰ä¸‹å›è½¦é”®
        if(ev.keyCode===13) {
            send();
        }
        if (event.which == 13) {
            // ç¦æ­¢æ¢è¡Œ
            event.cancelBubble=true;
            event.preventDefault();
            event.stopPropagation();
        }
    }

    input.onclick=send;

    box.onclick=function (ev) {
        console.log(ev.target.nodeName);
        if (ev.target.nodeName==="SPAN"){
            ev.target.parentElement.parentElement.removeChild(ev.target.parentElement);
        }
        if (ev.target.nodeName==="EM"){
            var input = document.createElement("input");
            var st = document.querySelector("strong");
            input.type="text";
            // console.dir(input)
            input.value=st.innerHTML;
            // console.log(input.value)
            ev.target.parentElement.replaceChild(input,st);

            input.focus();//è‡ªåŠ¨è·å–å…‰æ ‡
            input.onblur=function () {
                var strong = document.createElement("strong");
                strong.innerHTML=this.value;
                this.parentElement.replaceChild(strong,this);
                // console.log(strong.innerHTML)
                if (strong.innerHTML===""){
                    strong.parentElement.parentElement.removeChild(strong.parentElement);
                }
            }

        }

    }
    //è·å¾—ç„¦ç‚¹
    text.onfocus=function () {
        text.style.borderColor="#FF6A08";
    }
    //å¤±å»ç„¦ç‚¹
    text.onblur=function () {
        text.style.borderColor="#cccccc";
    }
    span1.onclick=function () {
        div.style.display="block";
        var flag=true;
        img.forEach(function (value) {
            value.onclick=function () {
                if (flag) {
                    // è¦å…‹éš†çš„å†…å®¹.cloneNode();
                    var node = value.cloneNode();
                    // console.log(node);
                    text.appendChild(node);
                    div.style.display = "none";
                    flag=false;
                }else {
                    div.style.display = "block";
                    flag=true;
                }
            }
        })

    }

</script>
</html>